<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0b3d2e" />
  <title>TPV NADEEM â€” B/W PRO</title>
  <link rel="stylesheet" href="./styles.css?v=1.3" />
</head>

<body class="theme-day">
  <div class="app" id="app">

    <!-- TOPBAR -->
    <header class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true">TPV</div>
        <div class="brand-text">
          <div class="brand-title">TPV NADEEM</div>
          <div class="brand-sub">B/W PRO Â· IVA incluido</div>
        </div>
      </div>

      <nav class="tabs" role="tablist" aria-label="Secciones">
        <button class="tab is-active" role="tab" aria-selected="true" data-tab="venta">Venta</button>
        <button class="tab" role="tab" aria-selected="false" data-tab="productos">Productos</button>
        <button class="tab" role="tab" aria-selected="false" data-tab="reportes">Reportes</button>
        <button class="tab" role="tab" aria-selected="false" data-tab="ajustes">Ajustes <span class="pill">Admin</span></button>
      </nav>

      <div class="actions">
        <button class="btn btn-ghost" id="btnTheme" type="button" title="Cambiar modo dÃ­a/noche">
          <span class="dot" aria-hidden="true"></span>
          <span id="themeLabel">DÃ­a</span>
        </button>

        <button class="btn btn-ghost" id="btnLogin" type="button" title="Cambiar usuario">
          <span class="icon" aria-hidden="true">ðŸ‘¤</span>
          <span id="userLabel">CAJERO</span>
        </button>

        <button class="btn btn-admin" id="btnAdmin" type="button" title="Acceso Admin (PIN)">
          <span class="icon" aria-hidden="true">ðŸ”’</span>
          <span id="adminState">Admin</span>
        </button>
      </div>
    </header>

    <!-- MAIN -->
    <main class="main">

      <!-- =========================
           VENTA (DEFAULT)
      ========================== -->
      <section class="page is-active" data-page="venta">
        <div class="pos-grid">

          <!-- LEFT -->
          <section class="panel panel-left">
            <div class="panel-head">
              <div class="panel-title">
                <h2>Venta rÃ¡pida</h2>
                <p class="scan-line">
                  <span class="scan-dot" id="scanDot" aria-hidden="true"></span>
                  <span class="muted">Escaneo siempre activo</span>
                </p>
              </div>

              <div class="panel-tools">
                <button class="btn btn-soft" id="btnQuickAmount" type="button">+ Importe rÃ¡pido</button>
                <button class="btn btn-soft" id="btnPark" type="button">
                  Aparcados <span class="badge badge-mini" id="parkBadge" hidden>0</span>
                </button>
              </div>
            </div>

            <div class="card">
              <div class="field-row">
                <label class="field">
                  <span>Escanear / Barcode</span>
                  <input id="barcodeInput" inputmode="numeric" autocomplete="off" placeholder="Escanea aquÃ­ (opcional)" />
                  <small>Si no estÃ¡s aquÃ­, igual captura el lector y aÃ±ade al instante.</small>
                </label>

                <label class="field">
                  <span>Buscar producto</span>
                  <input id="searchInput" autocomplete="off" placeholder="Nombre o barcodeâ€¦" />
                  <small>Filtra productos de la categorÃ­a seleccionada.</small>
                </label>
              </div>

              <!-- CATEGORÃAS debajo de barcode/buscar -->
              <div class="cat-bar">
                <div class="cat-title">CategorÃ­as</div>
                <div class="cat-actions">
                  <button class="btn btn-ghost btn-small" id="btnNewCategory" type="button">+ CategorÃ­a</button>
                  <button class="btn btn-ghost btn-small" id="btnManageCategories" type="button">Gestionar</button>
                </div>
              </div>

              <div class="cat-chips" id="catChips"></div>
            </div>

            <div class="section-title">
              <span>Productos</span>
              <div class="section-actions">
                <button class="btn btn-ghost" id="btnAddProductInline" type="button">+ Producto</button>
              </div>
            </div>

            <div class="prod-grid" id="prodGrid" aria-label="Productos por categorÃ­a"></div>

            <div class="hint">
              <div class="hint-title">Atajos</div>
              <div class="hint-body">
                <span class="kbd">F4</span> Cobrar Â·
                <span class="kbd">F2</span> Importe rÃ¡pido Â·
                <span class="kbd">Supr</span> Borrar Ãºltima Â·
                <span class="kbd">Esc</span> Cerrar modal / limpiar
              </div>
            </div>
          </section>

          <!-- RIGHT -->
          <section class="panel panel-right">
            <div class="panel-head">
              <div class="panel-title">
                <h2>Ticket</h2>
                <p><span class="mono" id="ticketNo">T-000001</span> Â· <span id="ticketDate">â€”</span></p>
              </div>

              <div class="panel-tools">
                <button class="btn btn-ghost" id="btnLastTicket" type="button">Ãšltimo</button>
                <button class="btn btn-ghost" id="btnEmailTicket" type="button">Email</button>
                <button class="btn btn-ghost" id="btnPrint" type="button">Imprimir</button>
              </div>
            </div>

            <div class="ticket card">
              <div class="ticket-head">
                <div class="ticket-shop">
                  <div class="ticket-shop-name" id="shopName">MALIK AHMAD NADEEM</div>
                  <div class="ticket-shop-sub" id="shopSub">C/ Vitoria 139 Â· 09007 Burgos Â· Tlf 632 480 316 Â· CIF 72374062P</div>
                </div>
                <div class="ticket-meta">
                  <div><span class="muted">Caja:</span> <span class="mono" id="posBox">CAJA-1</span></div>
                  <div><span class="muted">Cajero:</span> <span class="mono" id="posUser">CAJERO</span></div>
                </div>
              </div>

              <div class="ticket-lines" id="ticketLines" role="table" aria-label="LÃ­neas del ticket">
                <div class="trow thead" role="row">
                  <div class="tcell">Producto</div>
                  <div class="tcell tcell-center">Qty</div>
                  <div class="tcell tcell-right">PVP</div>
                  <div class="tcell tcell-right">Total</div>
                </div>
              </div>

              <!-- TOTALES -->
              <div class="ticket-totals">
                <div class="totals-grid">
                  <div class="total-row">
                    <span class="muted">LÃ­neas</span>
                    <span class="mono" id="linesCount">0</span>
                  </div>
                  <div class="total-row">
                    <span class="muted">Subtotal</span>
                    <span class="mono" id="subTotal">0,00 â‚¬</span>
                  </div>
                  <div class="total-row">
                    <span class="muted">IVA</span>
                    <span class="mono">Incluido</span>
                  </div>
                  <div class="total-row total-strong">
                    <span>Total</span>
                    <span class="mono" id="grandTotal">0,00 â‚¬</span>
                  </div>
                </div>

                <!-- PANEL COBRO HÃBRIDO -->
                <div class="pay-pro">
                  <div class="pay-top">
                    <div class="pay-switch">
                      <span class="muted small">ImpresiÃ³n</span>
                      <button class="switch" id="btnPrintToggle" type="button" aria-pressed="true">
                        <span class="switch-knob"></span>
                        <span class="switch-label" id="printLabel">ON</span>
                      </button>
                    </div>

                    <button class="btn btn-ghost btn-small" id="btnZFromVenta" type="button" title="Cierre Z del dÃ­a">
                      Cierre Z
                    </button>
                  </div>

                  <div class="pay-methods">
                    <button class="pay-m is-active" type="button" data-pay="efectivo">EFECTIVO</button>
                    <button class="pay-m" type="button" data-pay="tarjeta">TARJETA</button>
                    <button class="pay-m" type="button" data-pay="mixto">MIXTO</button>
                  </div>

                  <!-- SOLO TARJETA 1-TOQUE -->
                  <button class="btn btn-primary pay-card-one" id="btnCardOneTap" type="button">
                    SOLO TARJETA (1 TOQUE)
                  </button>

                  <!-- EFECTIVO/MIXTO -->
                  <div class="pay-cash-area" id="payCashArea">
                    <div class="field-row-3">
                      <label class="field">
                        <span>Entregado</span>
                        <input id="givenInput" inputmode="decimal" placeholder="0,00" />
                      </label>
                      <label class="field">
                        <span>Cambio</span>
                        <input id="changeInput" inputmode="decimal" placeholder="0,00" disabled />
                      </label>
                      <label class="field">
                        <span>Nota (opcional)</span>
                        <input id="noteName" placeholder="Cliente / Notaâ€¦" />
                      </label>
                    </div>

                    <div class="cash-buttons">
                      <button class="cash-btn" type="button" data-add="5">+5</button>
                      <button class="cash-btn" type="button" data-add="10">+10</button>
                      <button class="cash-btn" type="button" data-add="20">+20</button>
                      <button class="cash-btn" type="button" data-add="50">+50</button>
                      <button class="cash-btn cash-fn" type="button" id="btnExact">EXACTO</button>
                      <button class="cash-btn cash-fn" type="button" id="btnClearGiven">C</button>
                    </div>

                    <div class="keypad compact" id="payKeypad">
                      <button class="key" data-k="7">7</button>
                      <button class="key" data-k="8">8</button>
                      <button class="key" data-k="9">9</button>
                      <button class="key key-fn" data-k="bk">âŒ«</button>

                      <button class="key" data-k="4">4</button>
                      <button class="key" data-k="5">5</button>
                      <button class="key" data-k="6">6</button>
                      <button class="key key-fn" data-k="c">C</button>

                      <button class="key" data-k="1">1</button>
                      <button class="key" data-k="2">2</button>
                      <button class="key" data-k="3">3</button>
                      <button class="key key-fn" data-k=",">,</button>

                      <button class="key key-wide" data-k="0">0</button>
                      <button class="key" data-k="00">00</button>
                      <button class="key key-ok" data-k="ok">OK</button>
                    </div>

                    <div class="cta-row">
                      <button class="btn btn-danger" id="btnVoid" type="button">Anular</button>
                      <button class="btn btn-soft" id="btnRefund" type="button" title="Requiere PIN admin">DevoluciÃ³n</button>
                      <button class="btn btn-primary" id="btnPay" type="button">Cobrar</button>
                    </div>

                    <div class="mini-note muted">Clic derecho en una lÃ­nea = borrar. BIP solo al cerrar ticket.</div>
                  </div>
                </div>

              </div>
            </div>

          </section>
        </div>
      </section>

      <!-- =========================
           PRODUCTOS
      ========================== -->
      <section class="page" data-page="productos">
        <div class="page-wrap">
          <div class="page-head">
            <div>
              <h2>Productos</h2>
              <p>Alta, ediciÃ³n, categorÃ­as, import/export.</p>
            </div>
            <div class="page-actions">
              <button class="btn btn-soft" id="btnImportCsv" type="button">Importar CSV</button>
              <button class="btn btn-soft" id="btnExportCsv" type="button">Exportar CSV</button>
              <button class="btn btn-soft" id="btnBackupJson" type="button">Backup JSON</button>
              <button class="btn btn-soft" id="btnRestoreJson" type="button">Restaurar JSON</button>
              <button class="btn btn-primary" id="btnAddProduct" type="button">+ Nuevo producto</button>
            </div>
          </div>

          <div class="card">
            <div class="field-row">
              <label class="field">
                <span>Buscar por nombre</span>
                <input id="prodSearchName" placeholder="Ej: manzanaâ€¦" />
              </label>
              <label class="field">
                <span>Buscar por barcode</span>
                <input id="prodSearchBarcode" inputmode="numeric" placeholder="Escanear / escribir barcodeâ€¦" />
              </label>
              <label class="field">
                <span>CategorÃ­a</span>
                <select id="prodSearchCat"></select>
              </label>
            </div>
          </div>

          <div class="table card" id="productsTable">
            <div class="trow thead">
              <div class="tcell">Producto</div>
              <div class="tcell">Barcode</div>
              <div class="tcell tcell-right">PVP</div>
              <div class="tcell tcell-right">Compra</div>
              <div class="tcell">CategorÃ­a</div>
              <div class="tcell tcell-center">Fav</div>
              <div class="tcell tcell-right">Acciones</div>
            </div>
          </div>
        </div>
      </section>

      <!-- =========================
           REPORTES (dÃ­a/semana/mes/rango) + Bandeja del dÃ­a
      ========================== -->
      <section class="page" data-page="reportes">
        <div class="page-wrap">
          <div class="page-head">
            <div>
              <h2>Reportes</h2>
              <p>Diario Â· Semanal Â· Mensual Â· Personalizado Â· Cierre Z (limpia bandeja del dÃ­a).</p>
            </div>
            <div class="page-actions">
              <button class="btn btn-soft" id="btnExportSalesCsv" type="button">Exportar ventas CSV</button>
              <button class="btn btn-soft" id="btnCloseZ" type="button">Cierre Z</button>
            </div>
          </div>

          <div class="card">
            <div class="report-tabs">
              <button class="rtab is-active" type="button" data-r="dia">DÃ­a</button>
              <button class="rtab" type="button" data-r="semana">Semana</button>
              <button class="rtab" type="button" data-r="mes">Mes</button>
              <button class="rtab" type="button" data-r="rango">Rango</button>
            </div>

            <div class="report-controls">
              <div class="report-row" id="rowDia">
                <label class="field">
                  <span>Fecha</span>
                  <input id="repDay" type="date" />
                </label>
              </div>

              <div class="report-row" id="rowSemana" hidden>
                <label class="field">
                  <span>Semana (lunes)</span>
                  <input id="repWeek" type="date" />
                  <small>El sistema calcula lunes-domingo.</small>
                </label>
              </div>

              <div class="report-row" id="rowMes" hidden>
                <label class="field">
                  <span>Mes</span>
                  <input id="repMonth" type="month" />
                </label>
              </div>

              <div class="report-row" id="rowRango" hidden>
                <label class="field">
                  <span>Desde</span>
                  <input id="repFrom" type="date" />
                </label>
                <label class="field">
                  <span>Hasta</span>
                  <input id="repTo" type="date" />
                </label>
              </div>
            </div>
          </div>

          <div class="grid-2">
            <div class="card">
              <h3>Resumen</h3>
              <div class="stat-grid">
                <div class="stat"><div class="stat-label">Tickets</div><div class="stat-value mono" id="statTickets">0</div></div>
                <div class="stat"><div class="stat-label">Total</div><div class="stat-value mono" id="statTotal">0,00 â‚¬</div></div>
                <div class="stat"><div class="stat-label">Efectivo</div><div class="stat-value mono" id="statCash">0,00 â‚¬</div></div>
                <div class="stat"><div class="stat-label">Tarjeta</div><div class="stat-value mono" id="statCard">0,00 â‚¬</div></div>
              </div>
              <div class="hint" style="margin:12px 0 0;">
                <div class="hint-title">Cierre Z</div>
                <div class="hint-body" id="zInfo">Sin cierres.</div>
              </div>
            </div>

            <div class="card">
              <h3>Bandeja del dÃ­a</h3>
              <div class="muted small" id="trayInfo">â€”</div>
              <div class="table tray-table" id="trayTable">
                <div class="trow thead">
                  <div class="tcell">Hora</div>
                  <div class="tcell">Ticket</div>
                  <div class="tcell">Pago</div>
                  <div class="tcell tcell-right">Total</div>
                  <div class="tcell tcell-right">Acciones</div>
                </div>
              </div>
              <div class="muted small" style="margin-top:10px;">
                Al hacer Cierre Z, esta bandeja se limpia, pero el dÃ­a queda guardado en reportes.
              </div>
            </div>
          </div>

          <div class="table card" id="salesTable">
            <div class="trow thead">
              <div class="tcell">Fecha</div>
              <div class="tcell">Ticket</div>
              <div class="tcell">Pago</div>
              <div class="tcell tcell-right">Total</div>
              <div class="tcell tcell-right">Acciones</div>
            </div>
          </div>
        </div>
      </section>

      <!-- =========================
           AJUSTES
      ========================== -->
      <section class="page" data-page="ajustes">
        <div class="page-wrap">
          <div class="page-head">
            <div>
              <h2>Ajustes</h2>
              <p>Negocio, caja, escÃ¡ner, seguridad, impresiÃ³n.</p>
            </div>
            <div class="page-actions">
              <button class="btn btn-admin" id="btnAdminUnlock" type="button">Desbloquear Admin</button>
            </div>
          </div>

          <div class="grid-2">
            <div class="card">
              <h3>Negocio</h3>
              <div class="field-row">
                <label class="field"><span>Nombre</span><input id="setShopName" /></label>
                <label class="field"><span>SubtÃ­tulo</span><input id="setShopSub" /></label>
              </div>
              <div class="field-row">
                <label class="field"><span>Caja</span><input id="setBoxName" /></label>
                <label class="field"><span>Pie ticket</span><input id="setFooterText" /></label>
              </div>
            </div>

            <div class="card">
              <h3>RÃ¡pido</h3>
              <div class="field-row">
                <label class="field">
                  <span>ImpresiÃ³n por defecto</span>
                  <select id="setPrintDefault">
                    <option value="1">ON</option>
                    <option value="0">OFF</option>
                  </select>
                </label>
                <label class="field">
                  <span>Auto-imprimir al cobrar</span>
                  <select id="setAutoPrint">
                    <option value="0">No</option>
                    <option value="1">SÃ­</option>
                  </select>
                </label>
              </div>
              <div class="field-row">
                <label class="field">
                  <span>Escaneo siempre activo</span>
                  <select id="setAlwaysScan">
                    <option value="1">SÃ­</option>
                    <option value="0">No</option>
                  </select>
                </label>
                <label class="field">
                  <span>Velocidad escÃ¡ner (ms)</span>
                  <input id="setScanSpeed" inputmode="numeric" placeholder="35" />
                  <small>Recomendado 30â€“45.</small>
                </label>
              </div>
            </div>
          </div>

          <div class="card">
            <h3>Seguridad</h3>
            <div class="field-row">
              <label class="field">
                <span>PIN Admin (cambiar)</span>
                <input id="setAdminPin" type="password" inputmode="numeric" placeholder="â€¢â€¢â€¢â€¢" />
                <small>Por defecto: 1234</small>
              </label>
              <label class="field">
                <span>Auto-bloqueo Admin (min)</span>
                <input id="setAutoLockMin" inputmode="numeric" placeholder="10" />
              </label>
            </div>
            <div class="hint">
              <div class="hint-title">Sonidos</div>
              <div class="hint-body">BIP solo al cerrar ticket y al aÃ±adir importe manual.</div>
            </div>
          </div>

        </div>
      </section>

    </main>

    <footer class="footer">
      <div class="footer-left">
        <span class="badge badge-ok">Local</span>
        <span class="muted">GitHub Pages Â· LocalStorage</span>
      </div>
      <div class="footer-right muted"><span class="mono" id="appVersion">v1.3</span></div>
    </footer>
  </div>

  <!-- PRINT AREA 80MM -->
  <div id="printArea" class="print-area" aria-hidden="true"></div>

  <!-- OVERLAY CAMBIO -->
  <div id="changeOverlay" class="change-overlay" hidden>
    <div class="change-box">
      <div class="change-title">CAMBIO</div>
      <div class="change-value mono" id="changeOverlayValue">0,00 â‚¬</div>
    </div>
  </div>

  <!-- TOAST -->
  <div id="toastHost" class="toast-host" aria-hidden="true"></div>

  <!-- BACKDROP -->
  <div class="modal-backdrop" id="backdrop" hidden></div>

  <!-- Hidden file inputs -->
  <input id="fileCsv" type="file" accept=".csv,text/csv" hidden />
  <input id="fileJson" type="file" accept=".json,application/json" hidden />

  <!-- LOGIN -->
  <dialog class="modal" id="modalLogin" aria-label="Login">
    <div class="modal-head">
      <div>
        <div class="modal-title">Login caja</div>
        <div class="muted small">Usuario + contraseÃ±a</div>
      </div>
      <button class="icon-btn" data-close="modalLogin" aria-label="Cerrar">âœ•</button>
    </div>
    <div class="modal-body">
      <label class="field">
        <span>Usuario</span>
        <input id="loginUser" autocomplete="username" placeholder="cajero" />
      </label>
      <label class="field">
        <span>ContraseÃ±a</span>
        <input id="loginPass" type="password" autocomplete="current-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
        <small>Por defecto: cajero/1234 Â· admin/1234</small>
      </label>
    </div>
    <div class="modal-foot">
      <button class="btn btn-ghost" data-close="modalLogin" type="button">Cancelar</button>
      <button class="btn btn-primary" id="btnLoginOk" type="button">Entrar</button>
    </div>
  </dialog>

  <!-- ADMIN PIN -->
  <dialog class="modal" id="modalAdmin" aria-label="PIN Admin">
    <div class="modal-head">
      <div>
        <div class="modal-title">PIN Admin</div>
        <div class="muted small">Acciones sensibles</div>
      </div>
      <button class="icon-btn" data-close="modalAdmin" aria-label="Cerrar">âœ•</button>
    </div>
    <div class="modal-body">
      <label class="field">
        <span>PIN</span>
        <input id="adminPin" type="password" inputmode="numeric" placeholder="â€¢â€¢â€¢â€¢" />
        <small>Por defecto: 1234</small>
      </label>
    </div>
    <div class="modal-foot">
      <button class="btn btn-ghost" data-close="modalAdmin" type="button">Cancelar</button>
      <button class="btn btn-admin" id="btnAdminOk" type="button">Desbloquear</button>
    </div>
  </dialog>

  <!-- IMPORTE RÃPIDO -->
  <dialog class="modal" id="modalQuick" aria-label="Importe rÃ¡pido">
    <div class="modal-head">
      <div>
        <div class="modal-title">Importe rÃ¡pido</div>
        <div class="muted small">AÃ±ade una lÃ­nea manual al ticket</div>
      </div>
      <button class="icon-btn" data-close="modalQuick" aria-label="Cerrar">âœ•</button>
    </div>

    <div class="modal-body">
      <div class="field-row">
        <label class="field">
          <span>Importe (â‚¬)</span>
          <input id="quickAmount" inputmode="decimal" placeholder="0,00" />
        </label>
        <label class="field">
          <span>Nombre (opcional)</span>
          <input id="quickName" placeholder="Ej: Servicio, Ajusteâ€¦" />
        </label>
      </div>

      <div class="keypad" id="quickKeypad">
        <button class="key" data-k="7">7</button><button class="key" data-k="8">8</button><button class="key" data-k="9">9</button><button class="key key-fn" data-k="bk">âŒ«</button>
        <button class="key" data-k="4">4</button><button class="key" data-k="5">5</button><button class="key" data-k="6">6</button><button class="key key-fn" data-k="c">C</button>
        <button class="key" data-k="1">1</button><button class="key" data-k="2">2</button><button class="key" data-k="3">3</button><button class="key key-fn" data-k=",">,</button>
        <button class="key key-wide" data-k="0">0</button><button class="key" data-k="00">00</button><button class="key key-ok" data-k="ok">OK</button>
      </div>
    </div>

    <div class="modal-foot">
      <button class="btn btn-ghost" data-close="modalQuick" type="button">Cancelar</button>
      <button class="btn btn-primary" id="btnQuickOk" type="button">AÃ±adir</button>
    </div>
  </dialog>

  <!-- PRODUCTO -->
  <dialog class="modal" id="modalProduct" aria-label="Producto">
    <div class="modal-head">
      <div>
        <div class="modal-title" id="prodModalTitle">Producto</div>
        <div class="muted small">Barcode â†’ nombre â†’ precios â†’ categorÃ­a</div>
      </div>
      <button class="icon-btn" data-close="modalProduct" aria-label="Cerrar">âœ•</button>
    </div>

    <div class="modal-body">
      <div class="field-row">
        <label class="field"><span>Barcode</span><input id="prodBarcode" inputmode="numeric" placeholder="Escanear o escribirâ€¦" /></label>
        <label class="field"><span>Nombre</span><input id="prodName" placeholder="Ej: PlÃ¡tanoâ€¦" /></label>
      </div>

      <div class="field-row">
        <label class="field"><span>PVP (IVA incl.)</span><input id="prodPrice" inputmode="decimal" placeholder="0,00" /></label>
        <label class="field"><span>Compra (opcional)</span><input id="prodCost" inputmode="decimal" placeholder="0,00" /></label>
        <label class="field"><span>CategorÃ­a</span><select id="prodCat"></select></label>
      </div>

      <div class="field-row">
        <label class="field"><span>Favorito</span>
          <select id="prodFav"><option value="0">No</option><option value="1">SÃ­</option></select>
        </label>
        <label class="field"><span>Unidad</span>
          <select id="prodUnit"><option value="ud">Ud</option><option value="kg">Kg</option></select>
        </label>
      </div>
    </div>

    <div class="modal-foot">
      <button class="btn btn-ghost" data-close="modalProduct" type="button">Cancelar</button>
      <button class="btn btn-primary" id="btnProductSave" type="button">Guardar</button>
    </div>
  </dialog>

  <!-- CATEGORÃAS -->
  <dialog class="modal" id="modalCats" aria-label="CategorÃ­as">
    <div class="modal-head">
      <div>
        <div class="modal-title">CategorÃ­as</div>
        <div class="muted small">Crear / Renombrar / Borrar (Admin)</div>
      </div>
      <button class="icon-btn" data-close="modalCats" aria-label="Cerrar">âœ•</button>
    </div>

    <div class="modal-body">
      <div class="field-row">
        <label class="field"><span>Nueva categorÃ­a</span><input id="newCatName" placeholder="Ej: Bebidasâ€¦" /></label>
        <div class="field"><span>&nbsp;</span><button class="btn btn-primary" id="btnCreateCat" type="button">Crear</button></div>
      </div>

      <div class="cat-list" id="catList"></div>
    </div>

    <div class="modal-foot">
      <button class="btn btn-ghost" data-close="modalCats" type="button">Cerrar</button>
    </div>
  </dialog>

  <!-- APARCADOS -->
  <dialog class="modal" id="modalPark" aria-label="Aparcados">
    <div class="modal-head">
      <div>
        <div class="modal-title">Aparcados</div>
        <div class="muted small">Guardar y recuperar tickets</div>
      </div>
      <button class="icon-btn" data-close="modalPark" aria-label="Cerrar">âœ•</button>
    </div>

    <div class="modal-body">
      <div class="field-row">
        <label class="field"><span>Nombre (opcional)</span><input id="parkName" placeholder="Ej: Cliente / Mesaâ€¦" /></label>
        <div class="field"><span>&nbsp;</span><button class="btn btn-primary" id="btnParkNow" type="button">Aparcar actual</button></div>
      </div>
      <div class="park-list" id="parkList"></div>
    </div>

    <div class="modal-foot">
      <button class="btn btn-ghost" data-close="modalPark" type="button">Cerrar</button>
    </div>
  </dialog>

  <!-- CIERRE Z -->
  <dialog class="modal" id="modalZ" aria-label="Cierre Z">
    <div class="modal-head">
      <div>
        <div class="modal-title">Cierre Z</div>
        <div class="muted small">Arqueo efectivo vs esperado (limpia bandeja del dÃ­a)</div>
      </div>
      <button class="icon-btn" data-close="modalZ" aria-label="Cerrar">âœ•</button>
    </div>

    <div class="modal-body">
      <div class="field-row">
        <label class="field">
          <span>Efectivo contado (â‚¬)</span>
          <input id="zCashCounted" inputmode="decimal" placeholder="0,00" />
        </label>
        <label class="field">
          <span>Nota (opcional)</span>
          <input id="zNote" placeholder="Ej: descuadre porâ€¦"/>
        </label>
      </div>
      <div class="hint">
        <div class="hint-title">Resumen esperado</div>
        <div class="hint-body" id="zExpected">â€”</div>
      </div>
    </div>

    <div class="modal-foot">
      <button class="btn btn-ghost" data-close="modalZ" type="button">Cancelar</button>
      <button class="btn btn-primary" id="btnZOk" type="button">Guardar Cierre Z</button>
    </div>
  </dialog>

  <!-- EMAIL -->
  <dialog class="modal" id="modalEmail" aria-label="Enviar ticket">
    <div class="modal-head">
      <div>
        <div class="modal-title">Enviar ticket</div>
        <div class="muted small">mailto (sin servidor)</div>
      </div>
      <button class="icon-btn" data-close="modalEmail" aria-label="Cerrar">âœ•</button>
    </div>

    <div class="modal-body">
      <label class="field"><span>Email</span><input id="emailTo" type="email" placeholder="cliente@email.com" /></label>
      <label class="field"><span>Mensaje (opcional)</span><textarea id="emailMsg" rows="4" placeholder="Mensaje extraâ€¦"></textarea></label>
    </div>

    <div class="modal-foot">
      <button class="btn btn-ghost" data-close="modalEmail" type="button">Cancelar</button>
      <button class="btn btn-primary" id="btnEmailSend" type="button">Abrir email</button>
    </div>
  </dialog>

  <script src="./app.js?v=1.3" defer></script>
</body>
</html>
